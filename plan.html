<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุฎุทุฉ ุงูุทูุงุฑุฆ ุงูุชูุงุนููุฉ ุงูุดุงููุฉ - ุดุฑูุฉ ุฑูู ููุจุทุงุฑูุงุช</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&family=Readex+Pro:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Calm Neutrals with Safety Accents -->
    <!-- Application Structure Plan: ุชู ุงูุญูุงุธ ุนูู ูููู ุงูุชุทุจูู ุงูุดุงูู ูุน ุฅุถุงูุฉ ููุฒุฉ ุชุจุฏูู ุงููุบุฉ ูุชูุฒูู PDF. ุชู ุฅุถุงูุฉ ุฒุฑ ุชูุฒil ูููุชุจุงุช jspdf ู html2canvas. ุนูุฏ ุงูููุฑุ ุชููู ูุธููุฉ ูุฎุตุตุฉ ุจูุชุญ ุฌููุน ุงูุฃูุณุงู ูุงูุฃููุฑุฏููู ูุคูุชูุงุ ุซู ุชูุชูุท ุงููุญุชูู ูุชุญููู ุฅูู ููู PDF ูุชุนุฏุฏ ุงูุตูุญุงุชุ ุซู ุชุนูุฏ ุงููุงุฌูุฉ ุฅูู ุญุงูุชูุง ุงูุฃุตููุฉ. -->
    <!-- Visualization & Content Choices: 
    - Info: ูุงูู ูุญุชูู ุงูุชุทุจูู -> Goal: ุชูููุฑ ูุณุฎุฉ PDF ูุงุจูุฉ ููุชูุฒูู -> Viz: ุฒุฑ ุชูุฒูู ูุงุถุญ -> Interaction: ุงูููุฑ ูุชูุนูู ุนูููุฉ ุฅูุดุงุก PDF -> Justification: ูุชูุญ ูููุณุชุฎุฏููู ุญูุธ ููุดุงุฑูุฉ ุงูุฎุทุฉ ุจุณูููุฉ ููุซููุฉ ุฑุณููุฉุ ูุน ุงูุญูุงุธ ุนูู ุงููุบุฉ ูุงูุชูุณูู ุงูุญุงูููู.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        :lang(ar) {
            font-family: 'Tajawal', sans-serif;
        }
        :lang(en) {
            font-family: 'Readex Pro', sans-serif;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 450px;
            margin-left: auto;
            margin-right: auto;
            height: auto;
            max-height: 450px;
        }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #a8a29e; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #78716c; }
        
        .nav-item { transition: all 0.2s ease-in-out; }
        html[dir="rtl"] .nav-item:hover { transform: translateX(-2px); }
        html[dir="ltr"] .nav-item:hover { transform: translateX(2px); }
        
        .active-nav { background-color: #f59e0b; color: #1e293b; }
        html[dir="rtl"] .active-nav { border-right: 4px solid #d97706; }
        html[dir="ltr"] .active-nav { border-left: 4px solid #d97706; }

        .accordion-content { max-height: 0; overflow: hidden; transition: max-height 0.3s ease-in-out; }
        
        .layout-tab.active {
            border-color: #f59e0b;
            background-color: #fffbeb;
            color: #b45309;
        }
        #lightbox {
            background-color: rgba(0, 0, 0, 0.8);
            transition: opacity 0.3s ease-in-out;
        }
        #lightbox img {
            max-width: 90vw;
            max-height: 90vh;
            transition: transform 0.3s ease-in-out;
        }
    </style>
</head>
<body class="bg-stone-50">
    <div id="lightbox" class="hidden fixed inset-0 z-50 flex items-center justify-center" onclick="closeLightbox()">
        <img id="lightbox-img" src="" alt="Enlarged layout" class="rounded-lg shadow-2xl">
    </div>

    <div class="flex h-screen bg-stone-100">
        <!-- Sidebar -->
        <aside class="w-72 flex-shrink-0 bg-slate-800 text-white flex flex-col shadow-2xl">
            <div class="h-24 flex items-center justify-center bg-slate-900 shadow-md px-4">
                 <h1 class="text-xl font-bold text-center text-amber-400" data-translate="app_title">ุฎุทุฉ ุงูุทูุงุฑุฆ ุงูุชูุงุนููุฉ<br><span class="text-white font-normal text-base" data-translate="app_subtitle">ุดุฑูุฉ ุฑูู ููุจุทุงุฑูุงุช</span></h1>
            </div>
            
            <div class="px-4 py-3 border-b border-t border-slate-700 space-y-2">
                <button onclick="toggleLanguage()" class="w-full bg-slate-700 hover:bg-slate-600 text-amber-300 font-bold py-2 px-4 rounded-lg transition-colors duration-200 flex items-center justify-center">
                    <span id="lang-toggle-icon" class="text-lg">๐ฌ๐ง</span>
                    <span id="lang-toggle-text" class="mx-2" data-translate="toggle_lang_btn">Switch to English</span>
                </button>
                <button id="download-pdf-btn" onclick="downloadPDF()" class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition-colors duration-200 flex items-center justify-center">
                    <svg class="w-5 h-5 me-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg>
                    <span data-translate="download_pdf_btn">ุชูุฒูู PDF</span>
                </button>
            </div>

            <nav id="main-nav" class="flex-1 px-2 py-4 space-y-2 overflow-y-auto">
            </nav>

            <footer class="p-4 mt-auto border-t border-slate-700 text-center text-xs text-slate-400">
                <p data-translate="footer_contact">ููุชูุงุตู</p>
                <a href="mailto:Khalfan600059@gmail.com" class="hover:text-amber-300">Khalfan600059@gmail.com</a>
            </footer>
        </aside>

        <!-- Main content -->
        <main id="main-content" class="flex-1 overflow-y-auto p-6 md:p-8 lg:p-10">
            
            <section id="dashboard" class="content-section">
                <h2 class="text-3xl font-bold text-slate-800 mb-6" data-translate="s0_title">ุงููุจุงุฏุฆ ุงูุฃุณุงุณูุฉ ูุฎุทุฉ ุงูุทูุงุฑุฆ</h2>
                <div class="bg-white p-6 rounded-xl shadow-lg mb-8">
                    <h3 class="text-xl font-bold text-slate-800 mb-4" data-translate="s0_intro_title">ุงูููุฏูุฉ ูุงูุฃูุฏุงู</h3>
                    <p class="text-stone-700 leading-relaxed mb-6" data-translate="s0_intro_p">ุชูุชุฒู ุดุฑูุฉ ุฑูู ููุจุทุงุฑูุงุช ููุนุฏุงุช ุงูุทุงูุฉ ุจุชูููุฑ ุจูุฆุฉ ุนูู ุขููุฉ ูุตุญูุฉ. ุชู ุฅุนุฏุงุฏ ูุฐู ุงูุฎุทุฉ ูุถูุงู ุชุฏุฎู ุณุฑูุน ููุนุงู ูููุงุฌูุฉ ุฌููุน ุงูุญุงูุงุช ุงูุทุงุฑุฆุฉุ ุญูุงูุฉู ููุฃุฑูุงุญ ูุงูููุชููุงุชุ ูุชููููุงู ููุฎุณุงุฆุฑุ ูุฅุนุงุฏุฉ ุงูุฃูุถุงุน ุฅูู ุญุงูุชูุง ุงูุทุจูุนูุฉ ูู ุฃุณุฑุน ููุช ูููู.</p>
                    <div id="objectives-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"></div>
                </div>
                 <div class="bg-white p-6 rounded-xl shadow-lg mb-8">
                    <h3 class="text-xl font-bold text-slate-800 mb-4" data-translate="s0_legal_title">ุงููุงุฏุฉ ุงููุงููููุฉ</h3>
                    <p class="text-stone-700 leading-relaxed" data-translate="s0_legal_p">ุชู ุฅุนุฏุงุฏ ูุฐู ุงูุฎุทุฉ ุงุณุชูุงุฏูุง ุฅูู ูุงููู ุงูุฏูุงุน ุงููุฏูู ุงูุตุงุฏุฑ ุจุงููุฑุณูู ุงูุณูุทุงูู ุฑูู (ูงูฆ/ูฉูก) ูุชุนุฏููุงุชูุ ูุงููุฑุงุฑ ุฑูู (ูขูก/ูฆูฃ) ุจุดุฃู ูุงุฆุญุฉ ุชุฏุงุจูุฑ ุงูุฏูุงุน ุงููุฏูู.</p>
                    <div class="mt-4 space-y-4">
                        <div class="bg-stone-50 p-4 rounded-lg border-r-4 border-l-0 border-amber-500"><h4 class="font-bold text-slate-700" data-translate="s0_legal_a1_title">ูุงุฏุฉ ุฑูู (ูก)</h4><p class="text-sm text-stone-600 mt-2" data-translate="s0_legal_a1_p">ุนูู ุงูุฅุฏุงุฑุงุช ุงููุณุคููุฉ ุนู ุงููุฑุงูู ุงูุนุงูุฉ ูุงูููุดุขุช ุงูุญูููุฉ ูุงููุคุณุณุงุช ูุงูุดุฑูุงุช ุชูููุฐ ุฎุทุท ูุชุฏุงุจูุฑ ุงูุฏูุงุน ุงููุฏูู ุจุงูุชูุณูู ูุน ุงูุฅุฏุงุฑุฉ ุงูุนุงูุฉ ููุฏูุงุน ุงููุฏูู.</p></div>
                        <div class="bg-stone-50 p-4 rounded-lg border-r-4 border-l-0 border-amber-500"><h4 class="font-bold text-slate-700" data-translate="s0_legal_a2_title">ูุงุฏุฉ ุฑูู (ูข)</h4><p class="text-sm text-stone-600 mt-2" data-translate="s0_legal_a2_p">ุนูู ุงูุฌูุงุช ุงููุณุคููุฉ ุชุนููู ูุณุคูู ูุฃุนูุงู ุงูุฃูู ูุงูุณูุงูุฉ ูููู ูุคููุงู ูุฎุจูุฑุงู ูุฃุฏุงุก ูุฐู ุงูููุงู.</p></div>
                    </div>
                </div>
                 <div class="bg-white p-6 rounded-xl shadow-lg">
                    <h3 class="text-xl font-bold text-slate-800 mb-4" data-translate="s0_def_title">ุงูุชุนุงุฑูู ุงูุฃุณุงุณูุฉ</h3>
                    <div class="space-y-2" id="definitions-accordion-container"></div>
                </div>
            </section>

            <section id="facility-data" class="content-section hidden">
                <h2 class="text-3xl font-bold text-slate-800 mb-6" data-translate="s1_title">ุจูุงูุงุช ุงูููุดุฃุฉ ูุงููุฎุงุทุฑ ุงููุญุชููุฉ</h2>
                <div class="bg-white p-6 rounded-xl shadow-lg mb-6">
                    <h3 class="text-xl font-bold text-slate-800 mb-4" data-translate="s1_data_title">ุจูุงูุงุช ุงูููุดุฃุฉ</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between border-b pb-2"><span class="font-semibold text-stone-600" data-translate="s1_data_name_label">ุงุณู ุงูููุดุฃุฉ:</span><span class="text-slate-800" data-translate="s1_data_name_value">ุดุฑูุฉ ุฑูู ููุจุทุงุฑูุงุช ููุนุฏุงุช ุงูุทุงูุฉ ุด.ู.ุน.ู</span></div>
                        <div class="flex justify-between border-b pb-2"><span class="font-semibold text-stone-600" data-translate="s1_data_loc_label">ุงููููุน:</span><span class="text-slate-800" data-translate="s1_data_loc_value">ููุทูุฉ ุงูุฑุณูู ุงูุตูุงุนูุฉุ ุณูุทูุฉ ุนููุงู</span></div>
                        <div class="flex justify-between border-b pb-2"><span class="font-semibold text-stone-600" data-translate="s1_data_activity_label">ุทุจูุนุฉ ุงูุนูู:</span><span class="text-slate-800" data-translate="s1_data_activity_value">ุชุตููุน ูุชุฎุฒูู ูุชุฌุงุฑุฉ ุงูุจุทุงุฑูุงุช</span></div>
                    </div>
                </div>
                 <div class="bg-white p-6 rounded-xl shadow-lg">
                    <h3 class="text-xl font-bold text-slate-800 mb-4" data-translate="s1_risks_title">ููุงูู ุงูุฎุทูุฑุฉ ุฏุงุฎู ุงูููุดุฃุฉ (ุญุณุจ ุงูุฃูุณุงู)</h3>
                    <div id="risks-grid" class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>
                </div>
            </section>
            
            <section id="teams" class="content-section hidden">
                <h2 class="text-3xl font-bold text-slate-800 mb-6" data-translate="s2_title">ุงููููู ุงูุชูุธููู ูุงููุฑู</h2>
                <p class="text-stone-600 mb-8" data-translate="s2_p">ุชุนุฑู ุนูู ุงููููู ุงูุชูุธููู ูุฅุฏุงุฑุฉ ุงูุทูุงุฑุฆ ูุงูููุงุฆู ุงููุงููุฉ ูุฃุนุถุงุก ุงููุฑู ุงููุฎุชููุฉ ูุถูุงู ุงูุชูุงุตู ุงููุนุงู ุฃุซูุงุก ุงูุทูุงุฑุฆ.</p>
                 <div class="bg-white p-6 rounded-xl shadow-lg mb-8">
                    <h3 class="text-xl font-bold text-slate-800 mb-4" data-translate="s2_org_title">ุงููููู ุงูุชูุธููู ูุฅุฏุงุฑุฉ ุงูุทูุงุฑุฆ</h3>
                     <div class="text-center p-4">
                        <div class="inline-block bg-blue-600 text-white p-4 rounded-lg shadow-lg" data-translate="s2_org_l1">ุงููุดุฑู ุงูุนุงู (ุงูุฑุฆูุณ ุงูุชูููุฐู)</div>
                        <div class="h-8 border-l-2 border-stone-400 mx-auto w-0"></div>
                        <div class="inline-block bg-amber-500 text-black p-4 rounded-lg shadow-lg" data-translate="s2_org_l2">ูุณุคูู ุงูุฃูู ูุงูุณูุงูุฉ</div>
                        <div class="h-8 border-l-2 border-stone-400 mx-auto w-0"></div>
                        <div class="h-8 w-1/2 border-t-2 border-stone-400 mx-auto"></div>
                        <div class="flex justify-around"><div class="h-8 border-l-2 border-stone-400"></div><div class="h-8 border-l-2 border-stone-400"></div><div class="h-8 border-l-2 border-stone-400"></div><div class="h-8 border-l-2 border-stone-400"></div></div>
                        <div id="teams-structure-grid" class="grid grid-cols-2 md:grid-cols-4 gap-4"></div>
                    </div>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-lg">
                    <h3 class="text-xl font-bold text-slate-800 mb-4" data-translate="s2_lists_title">ููุงุฆู ุฃุนุถุงุก ุงููุฑู</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-4 gap-6" id="team-lists-container"></div>
                </div>
            </section>

            <section id="responsibilities" class="content-section hidden">
                <h2 class="text-3xl font-bold text-slate-800 mb-6" data-translate="s3_title">ุงููุงุฌุจุงุช ูุงููุณุคูููุงุช ุงูุชูุตูููุฉ</h2>
                <p class="text-stone-600 mb-8" data-translate="s3_p">ุชูุตูู ุฏููู ูููุณุคูููุงุช ุงูููููุฉ ููู ุฏูุฑ ูู ุงูููุดุฃุฉุ ูู ุงูุฅุฏุงุฑุฉ ุงูุนููุง ุฅูู ุงูููุธูููุ ูุถูุงู ุงุณุชุฌุงุจุฉ ููุธูุฉ ููุนุงูุฉ.</p>
                <div class="bg-white p-6 rounded-xl shadow-lg">
                    <div class="space-y-2" id="roles-accordion-container"></div>
                </div>
            </section>
            
            <section id="activation" class="content-section hidden">
                 <h2 class="text-3xl font-bold text-slate-800 mb-6" data-translate="s4_title">ุขููุฉ ุชูุนูู ุงูุฎุทุฉ ูุฅุฌุฑุงุกุงุช ุงูุทูุงุฑุฆ</h2>
                 <p class="text-stone-600 mb-8" data-translate="s4_p">ุชุณูุณู ุงูุฅุฌุฑุงุกุงุช ุงููุชุจุนุฉ ุนูุฏ ูููุน ุญุงูุฉ ุทุงุฑุฆุฉุ ุจุฏุกุงู ูู ูุญุธุฉ ุงูุงูุชุดุงู ูุญุชู ุชุณููู ุงููููุน ููุฌูุงุช ุงููุฎุชุตุฉุ ุจุงูุฅุถุงูุฉ ุฅูู ุงูุฅุฌุฑุงุกุงุช ุงูุชูุตูููุฉ ููู ููุน ูู ุงูุทูุงุฑุฆ.</p>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
                    <div class="bg-white p-6 rounded-xl shadow-lg">
                        <h3 class="text-xl font-bold text-slate-800 mb-4" data-translate="s4_phase1_title">ุงููุฑุญูุฉ ุงูุฃููู: ูุจู ูุตูู ูุฑู ุงูุฏูุงุน ุงููุฏูู</h3>
                        <ol id="phase1-steps" class="relative border-r-2 border-l-0 border-stone-200 ms-4"></ol>
                    </div>
                     <div class="bg-white p-6 rounded-xl shadow-lg">
                        <h3 class="text-xl font-bold text-slate-800 mb-4" data-translate="s4_phase2_title">ุงููุฑุญูุฉ ุงูุซุงููุฉ: ุจุนุฏ ูุตูู ูุฑู ุงูุฏูุงุน ุงููุฏูู</h3>
                         <ol id="phase2-steps" class="relative border-r-2 border-l-0 border-stone-200 ms-4"></ol>
                     </div>
                </div>
                 <div class="bg-white p-6 rounded-xl shadow-lg">
                    <h3 class="text-xl font-bold text-slate-800 mb-4" data-translate="s4_procedures_title">ุงูุฅุฌุฑุงุกุงุช ุงูุชูุตูููุฉ ุญุณุจ ููุน ุงูุทุงุฑุฆ</h3>
                    <div class="border-b border-stone-200">
                        <nav class="-mb-px flex gap-x-6" id="risk-tabs"></nav>
                    </div>
                    <div id="fire-emergency" class="tab-content mt-6"><div class="space-y-4 text-sm" id="fire-procedures"></div></div>
                    <div id="medical-emergency" class="tab-content mt-6 hidden"><div class="space-y-4 text-sm" id="medical-procedures"></div></div>
                    <div id="environmental-emergency" class="tab-content mt-6 hidden"><div class="space-y-4 text-sm" id="environmental-procedures"></div></div>
                </div>
            </section>
            
            <section id="equipment" class="content-section hidden">
                <h2 class="text-3xl font-bold text-slate-800 mb-6" data-translate="s5_title">ุงูุฃูุธูุฉ ูุงููุนุฏุงุช</h2>
                <p class="text-stone-600 mb-8" data-translate="s5_p">ุชูุงุตูู ุญูู ุฃูุธูุฉ ุงูุณูุงูุฉ ููุนุฏุงุช ุงูุทูุงุฑุฆ ุงููุชููุฑุฉ ูู ุงูููุดุฃุฉุ ุจูุง ูู ุฐูู ุฃููุงุนูุงุ ุฃุนุฏุงุฏูุงุ ูุฌุฏุงูู ุงููุญุต ุงูุฏูุฑู ูุถูุงู ุฌุงูุฒูุชูุง ุงูุฏุงุฆูุฉ.</p>
                <div class="bg-white p-6 rounded-xl shadow-lg mb-8">
                    <h3 class="text-xl font-bold text-slate-800 mb-4" data-translate="s5_extinguisher_title">ุชูุงุตูู ูุนุฏุงุช ุฅุทูุงุก ุงูุญุฑูู</h3>
                    <div class="grid grid-cols-1 lg:grid-cols-5 gap-6">
                        <div class="lg:col-span-3">
                            <h4 class="text-lg font-semibold text-slate-700 mb-4 text-center" data-translate="s5_extinguisher_chart_title">ุชูุฒูุน ุทูุงูุงุช ุงูุญุฑูู ุงููุฏููุฉ</h4>
                            <div class="chart-container"><canvas id="fireExtinguisherChart"></canvas></div>
                        </div>
                        <div id="extinguisher-types" class="lg:col-span-2 space-y-3"></div>
                    </div>
                </div>
                 <div class="bg-white p-6 rounded-xl shadow-lg mb-8">
                     <h3 class="text-xl font-bold text-slate-800 mb-4" data-translate="s5_inspection_title">ุฌุฏูู ุงููุญุต ุงูุฏูุฑู ูููุนุฏุงุช</h3>
                     <div class="overflow-x-auto">
                        <table class="min-w-full divide-y divide-stone-200">
                            <thead class="bg-stone-50"><tr id="inspection-table-head"></tr></thead>
                            <tbody class="bg-white divide-y divide-stone-200" id="inspection-table-body"></tbody>
                        </table>
                    </div>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-lg">
                     <h3 class="text-xl font-bold text-slate-800 mb-4" data-translate="s5_alarm_title">ูุนูููุงุช ูุธุงู ุฅูุฐุงุฑ ุงูุญุฑูู</h3>
                     <ul id="alarm-system-info" class="list-disc list-inside text-stone-700 space-y-2"></ul>
                </div>
            </section>
            
            <section id="evacuation" class="content-section hidden">
                <h2 class="text-3xl font-bold text-slate-800 mb-6" data-translate="s6_title">ุทุฑู ุงูุฅุฎูุงุก ูุงููุฎุทุทุงุช</h2>
                <p class="text-stone-600 mb-8" data-translate="s6_p">ุชุญุชูู ูุฐู ุงูุตูุญุฉ ุนูู ุงูุชุนูููุงุช ุงูุฃุณุงุณูุฉ ูุนูููุฉ ุงูุฅุฎูุงุกุ ูุงุฌุจุงุช ุงูุฃูุฑุงุฏุ ูููุงูุน ููุงุท ุงูุชุฌูุน ุงูุขููุฉ ูุงููุฎุทุทุงุช ุงูุชูุถูุญูุฉ ููููุดุฃุฉ.</p>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div class="bg-white p-6 rounded-xl shadow-lg">
                        <h3 class="text-xl font-bold text-slate-800 mb-4" data-translate="s6_instructions_title">ุชุนูููุงุช ุงูุฅุฎูุงุก ูุฌููุน ุงูููุธููู ๐</h3>
                        <ol id="evacuation-instructions" class="list-decimal list-inside text-stone-700 space-y-3"></ol>
                    </div>
                     <div class="bg-white p-6 rounded-xl shadow-lg">
                        <h3 class="text-xl font-bold text-slate-800 mb-4" data-translate="s6_assembly_points_title">ููุงุท ุงูุชุฌูุน ุงูุขููุฉ ๐</h3>
                         <div id="assembly-points" class="space-y-4"></div>
                     </div>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-lg mt-6">
                    <h3 class="text-xl font-bold text-slate-800 mb-4" data-translate="s6_layouts_title">ูุฎุทุทุงุช ุงูููุดุฃุฉ</h3>
                    <p class="text-stone-600 mb-4" data-translate="s6_layouts_p">ูุฌุจ ุฅุฑูุงู ุงููุฎุทุทุงุช ุจุญุฌู A3 ุญุณุจ ูุชุทูุจุงุช ุงูุฏูุงุน ุงููุฏูู. ุงููุฎุทุทุงุช ุชูุถุญ ูุณุงุฑุงุช ุงูุฅุฎูุงุกุ ููุงูุน ูุนุฏุงุช ุงูุฅุทูุงุกุ ูููุงุท ุงูุชุฌูุน.</p>
                     <div class="border-b border-stone-200 mb-4">
                        <nav class="-mb-px flex gap-x-4 overflow-x-auto" id="layout-tabs"></nav>
                    </div>
                    <div id="layout-images" class="bg-stone-100 p-2 rounded-lg">
                        <img id="layout-image-display" src="" alt="Layout Plan" class="w-full h-auto rounded-md cursor-pointer" onclick="openLightbox(this.src)">
                    </div>
                </div>
            </section>
            
            <section id="policies" class="content-section hidden">
                <h2 class="text-3xl font-bold text-slate-800 mb-6" data-translate="s8_title">ุงูุณูุงุณุงุช ูุงูุฅุฌุฑุงุกุงุช ุงูุฅุฏุงุฑูุฉ</h2>
                <p class="text-stone-600 mb-8" data-translate="s8_p">ููุฎุต ููุณูุงุณุงุช ูุงูุฅุฌุฑุงุกุงุช ุงูุฅุฏุงุฑูุฉ ุงูุฑุฆูุณูุฉ ุงููุชุนููุฉ ุจุงูุตุญุฉ ูุงูุณูุงูุฉ ุงูููููุฉ ูู ุงูุดุฑูุฉ.</p>
                <div class="space-y-6">
                    <div class="bg-white p-6 rounded-xl shadow-lg">
                        <h3 class="text-xl font-bold text-slate-800 mb-4" data-translate="s8_policy_title">๐ ุณูุงุณุฉ ุงูุณูุงูุฉ ูุงูุตุญุฉ ุงูููููุฉ</h3>
                        <ul id="safety-policy-list" class="list-disc list-inside text-stone-700 space-y-2 mt-4"></ul>
                    </div>
                     <div class="bg-white p-6 rounded-xl shadow-lg">
                        <h3 class="text-xl font-bold text-slate-800 mb-4" data-translate="s8_investigation_title">๐ต๏ธ ุฅุฌุฑุงุกุงุช ุงูุชุญููู ูู ุงูุญูุงุฏุซ</h3>
                         <ol id="investigation-steps" class="list-decimal list-inside text-stone-700 space-y-2 mt-4"></ol>
                    </div>
                </div>
            </section>

            <section id="contacts" class="content-section hidden">
                 <h2 class="text-3xl font-bold text-slate-800 mb-6" data-translate="s7_title">ุฃุฑูุงู ููุงุชู ุงูุทูุงุฑุฆ</h2>
                 <p class="text-stone-600 mb-8" data-translate="s7_p">ูุงุฆูุฉ ูุญุฏุซุฉ ุจุฃูู ุฃุฑูุงู ุงูุงุชุตุงู ุงูุฏุงุฎููุฉ ูุงูุฎุงุฑุฌูุฉ ูุงุณุชุฎุฏุงููุง ูู ุญุงูุงุช ุงูุทูุงุฑุฆ.</p>
                 <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                     <div class="bg-white p-6 rounded-xl shadow-lg"><h3 class="text-xl font-bold text-slate-800 mb-4" data-translate="s7_external_title">ุงูุฌูุงุช ุงูุฎุงุฑุฌูุฉ</h3><div id="external-contacts-container" class="space-y-3"></div></div>
                      <div class="bg-white p-6 rounded-xl shadow-lg"><h3 class="text-xl font-bold text-slate-800 mb-4" data-translate="s7_internal_title">ุงููุนูููู ุจุงูููุดุฃุฉ</h3><div id="internal-contacts-container" class="space-y-3"></div></div>
                 </div>
            </section>
        </main>
    </div>
    <script>
        // Language and Data Store
        let currentLanguage = 'ar';
        let fireExtinguisherChart;

        const translations = {
            app_title: { ar: "ุฎุทุฉ ุงูุทูุงุฑุฆ ุงูุชูุงุนููุฉ", en: "Interactive Emergency Plan" },
            app_subtitle: { ar: "ุดุฑูุฉ ุฑูู ููุจุทุงุฑูุงุช", en: "Reem Batteries & Power Appliances" },
            toggle_lang_btn: { ar: "Switch to English", en: "ุงูุชุจุฏูู ุฅูู ุงูุนุฑุจูุฉ" },
            download_pdf_btn: { ar: "ุชูุฒูู PDF", en: "Download PDF" },
            footer_contact: { ar: "ููุชูุงุตู", en: "Contact" },
            nav_items: [
                { id: 'dashboard', icon: 'โ๏ธ', text: { ar: "ุงููุจุงุฏุฆ ุงูุฃุณุงุณูุฉ", en: "Core Principles" } },
                { id: 'facility-data', icon: '๐ข', text: { ar: "ุจูุงูุงุช ุงูููุดุฃุฉ ูุงููุฎุงุทุฑ", en: "Facility Data & Risks" } },
                { id: 'teams', icon: '๐ฅ', text: { ar: "ุงููููู ุงูุชูุธููู ูุงููุฑู", en: "Structure & Teams" } },
                { id: 'responsibilities', icon: '๐', text: { ar: "ุงููุงุฌุจุงุช ูุงููุณุคูููุงุช", en: "Duties & Responsibilities" } },
                { id: 'activation', icon: 'โ๏ธ', text: { ar: "ุขููุฉ ุชูุนูู ุงูุฎุทุฉ", en: "Plan Activation" } },
                { id: 'equipment', icon: '๐งฏ', text: { ar: "ุงูุฃูุธูุฉ ูุงููุนุฏุงุช", en: "Systems & Equipment" } },
                { id: 'evacuation', icon: '๐ถ', text: { ar: "ุทุฑู ุงูุฅุฎูุงุก ูุงููุฎุทุทุงุช", en: "Evacuation & Layouts" } },
                { id: 'contacts', icon: '๐', text: { ar: "ุฃุฑูุงู ุงูููุงุชู", en: "Contact Numbers" } },
                { id: 'policies', icon: '๐', text: { ar: "ุงูุณูุงุณุงุช ูุงูุฅุฌุฑุงุกุงุช", en: "Policies & Procedures" } }
            ],
            s0_title: { ar: "ุงููุจุงุฏุฆ ุงูุฃุณุงุณูุฉ ูุฎุทุฉ ุงูุทูุงุฑุฆ", en: "Core Principles of the Emergency Plan" },
            s0_intro_title: { ar: "ุงูููุฏูุฉ ูุงูุฃูุฏุงู", en: "Introduction & Objectives" },
            s0_intro_p: {
                ar: "ุชูุชุฒู ุดุฑูุฉ ุฑูู ููุจุทุงุฑูุงุช ููุนุฏุงุช ุงูุทุงูุฉ ุจุชูููุฑ ุจูุฆุฉ ุนูู ุขููุฉ ูุตุญูุฉ. ุชู ุฅุนุฏุงุฏ ูุฐู ุงูุฎุทุฉ ูุถูุงู ุชุฏุฎู ุณุฑูุน ููุนุงู ูููุงุฌูุฉ ุฌููุน ุงูุญุงูุงุช ุงูุทุงุฑุฆุฉุ ุญูุงูุฉู ููุฃุฑูุงุญ ูุงูููุชููุงุชุ ูุชููููุงู ููุฎุณุงุฆุฑุ ูุฅุนุงุฏุฉ ุงูุฃูุถุงุน ุฅูู ุญุงูุชูุง ุงูุทุจูุนูุฉ ูู ุฃุณุฑุน ููุช ูููู.",
                en: "Reem Batteries & Power Appliances Co. is committed to providing a safe and healthy work environment. This plan has been developed to ensure a rapid and effective response to all emergencies, to protect lives and property, reduce losses, and restore conditions to normal as quickly as possible."
            },
            objectives: [
                { icon: '๐ก๏ธ', title: { ar: "ุญูุงูุฉ ุงูุฃุฑูุงุญ ูุงูููุชููุงุช", en: "Protect Lives & Property" }, p: { ar: "ุชูููู ุงูุฎุณุงุฆุฑ ุงูุจุดุฑูุฉ ูุงููุงุฏูุฉ ุฅูู ุฃุฏูู ุญุฏ ูููู.", en: "Minimize human and material losses to the lowest possible extent." } },
                { icon: '๐จ', title: { ar: "ุงูุงุณุชุนุฏุงุฏ ุงูุชุงู", en: "Full Readiness" }, p: { ar: "ููุงุฌูุฉ ูุงูุฉ ุงูุญูุงุฏุซ ูุงูุงุญุชูุงูุงุช ุงููุชููุนุฉ ูู ุงูููุดุฃุฉ.", en: "Confront all expected accidents and possibilities in the facility." } },
                { icon: '๐', title: { ar: "ุชุญุฏูุฏ ุงูุฃุฏูุงุฑ", en: "Define Roles" }, p: { ar: "ุชุญุฏูุฏ ููุงู ุงูุนุงูููู ุจูุถูุญ ุนูุฏ ุชูุนูู ุฎุทุฉ ุงูุทูุงุฑุฆ.", en: "Clearly define employee tasks when the emergency plan is activated." } }
            ],
            s0_legal_title: { ar: "ุงููุงุฏุฉ ุงููุงููููุฉ", en: "Legal Article" },
            s0_legal_p: {
                ar: "ุชู ุฅุนุฏุงุฏ ูุฐู ุงูุฎุทุฉ ุงุณุชูุงุฏูุง ุฅูู ูุงููู ุงูุฏูุงุน ุงููุฏูู ุงูุตุงุฏุฑ ุจุงููุฑุณูู ุงูุณูุทุงูู ุฑูู (ูงูฆ/ูฉูก) ูุชุนุฏููุงุชูุ ูุงููุฑุงุฑ ุฑูู (ูขูก/ูฆูฃ) ุจุดุฃู ูุงุฆุญุฉ ุชุฏุงุจูุฑ ุงูุฏูุงุน ุงููุฏูู.",
                en: "This plan has been prepared based on the Civil Defense Law issued by Royal Decree No. (76/91) and its amendments, and Resolution No. (21/63) regarding civil defense measures."
            },
            s0_legal_a1_title: { ar: "ูุงุฏุฉ ุฑูู (ูก)", en: "Article (1)" },
            s0_legal_a1_p: {
                ar: "ุนูู ุงูุฅุฏุงุฑุงุช ุงููุณุคููุฉ ุนู ุงููุฑุงูู ุงูุนุงูุฉ ูุงูููุดุขุช ุงูุญูููุฉ ูุงููุคุณุณุงุช ูุงูุดุฑูุงุช ุชูููุฐ ุฎุทุท ูุชุฏุงุจูุฑ ุงูุฏูุงุน ุงููุฏูู ุจุงูุชูุณูู ูุน ุงูุฅุฏุงุฑุฉ ุงูุนุงูุฉ ููุฏูุงุน ุงููุฏูู.",
                en: "The responsible administrations of public facilities, vital installations, institutions, and companies must implement civil defense plans and measures in coordination with the General Directorate of Civil Defense."
            },
            s0_legal_a2_title: { ar: "ูุงุฏุฉ ุฑูู (ูข)", en: "Article (2)" },
            s0_legal_a2_p: {
                ar: "ุนูู ุงูุฌูุงุช ุงููุณุคููุฉ ุชุนููู ูุณุคูู ูุฃุนูุงู ุงูุฃูู ูุงูุณูุงูุฉ ูููู ูุคููุงู ูุฎุจูุฑุงู ูุฃุฏุงุก ูุฐู ุงูููุงู.",
                en: "The responsible authorities must appoint a qualified and experienced security and safety official to perform these tasks."
            },
            s0_def_title: { ar: "ุงูุชุนุงุฑูู ุงูุฃุณุงุณูุฉ", en: "Key Definitions" },
            definitions: [
                { term: { ar: "ุฎุทุฉ ุงูุทูุงุฑุฆ ูุงูุฅุฎูุงุก", en: "Emergency & Evacuation Plan" }, definition: { ar: "ูู ูุฌููุนุฉ ูู ุงูุฅุฌุฑุงุกุงุช ูุงูุชุฏุงุจูุฑ ุงูููุงุฆูุฉ ุงููุนุฏุฉ ูุณุจููุง ูุงููุชูู ุนูููุง ูููุงุฌูุฉ ุญุงูุงุช ุงูุทูุงุฑุฆ.", en: "A set of preventive measures prepared in advance to confront emergencies and disasters." } },
                { term: { ar: "ูุณุคูู ุงูุฃูู ูุงูุณูุงูุฉ", en: "Security & Safety Officer" }, definition: { ar: "ูู ุงูุดุฎุต ุงููุคูู ูุงููุนูู ุจุชูููู ุงููุฎุงุทุฑ ููุถุน ุงูุณูุงุณุงุช ุงูุฃูููุฉ ุจุงูููุดุฃุฉ ูุฅุนุฏุงุฏ ุฎุทุท ุงูุทูุงุฑุฆ.", en: "The qualified person concerned with assessing risks, setting security policies, and preparing emergency plans." } },
                { term: { ar: "ูุฑู ุงูุฃูู ูุงูุณูุงูุฉ", en: "Security & Safety Teams" }, definition: { ar: "ูู ุงููุฑู ุงููุนููุฉ ุงูุชู ูุชู ุชุดููููุง ููุชุนุงูู ุงูุฃููู ูุน ุงูุญุงูุงุช ุงูุทุงุฑุฆุฉ ูุญูู ูุตูู ุงูุฌูุงุช ุงููุนููุฉ.", en: "The designated teams formed to handle initial responses to emergencies until the arrival of relevant authorities." } },
                { term: { ar: "ููุทุฉ ุงูุชุฌูุน", en: "Assembly Point" }, definition: { ar: "ูู ุงูููุงู ุงูุขูู ุงูุฐู ุชู ุชุญุฏูุฏู ูุณุจููุง ููุชู ุฅุฎูุงุก ุงูุฃุดุฎุงุต ุฅููู ูู ุงูุญุงูุงุช ุงูุทุงุฑุฆุฉ.", en: "The safe place determined in advance to which people are evacuated in emergencies." } }
            ],
            s1_title: { ar: "ุจูุงูุงุช ุงูููุดุฃุฉ ูุงููุฎุงุทุฑ ุงููุญุชููุฉ", en: "Facility Data & Potential Risks" },
            s1_data_title: { ar: "ุจูุงูุงุช ุงูููุดุฃุฉ", en: "Facility Data" },
            s1_data_name_label: { ar: "ุงุณู ุงูููุดุฃุฉ:", en: "Facility Name:" },
            s1_data_name_value: { ar: "ุดุฑูุฉ ุฑูู ููุจุทุงุฑูุงุช ููุนุฏุงุช ุงูุทุงูุฉ ุด.ู.ุน.ู", en: "Reem Batteries & Power Appliances Co SAOC" },
            s1_data_loc_label: { ar: "ุงููููุน:", en: "Location:" },
            s1_data_loc_value: { ar: "ููุทูุฉ ุงูุฑุณูู ุงูุตูุงุนูุฉุ ุณูุทูุฉ ุนููุงู", en: "Rusayl Industrial Area, Sultanate of Oman" },
            s1_data_activity_label: { ar: "ุทุจูุนุฉ ุงูุนูู:", en: "Nature of Business:" },
            s1_data_activity_value: { ar: "ุชุตููุน ูุชุฎุฒูู ูุชุฌุงุฑุฉ ุงูุจุทุงุฑูุงุช", en: "Manufacturing, storage, and trading of batteries" },
            s1_risks_title: { ar: "ููุงูู ุงูุฎุทูุฑุฉ ุฏุงุฎู ุงูููุดุฃุฉ (ุญุณุจ ุงูุฃูุณุงู)", en: "Potential Risks within the Facility (by Department)" },
            risks: [
                { dept: { ar: "ูุณู ุตูุงุนุฉ ุงูุฃููุงุญ", en: "Plate Making Dept." }, risk: { ar: "ุญุฑููุ ุตุนู ููุฑุจุงุฆูุ ููุงุฏ ููููุงุฆูุฉุ ุญูุงุฏุซ ุฑุงูุนุงุช ุดูููุฉ.", en: "Fire, Electrocution, Chemical, Fork Lift accidents." } },
                { dept: { ar: "ูุณู ุงููููุจุฉ ุจุงูุญูู", en: "Injection Molding Dept." }, risk: { ar: "ุญุฑููุ ุตุนู ููุฑุจุงุฆูุ ููุงูุจ ุซูููุฉุ ุญูุงุฏุซ ุฑุงูุนุงุช ุดูููุฉ.", en: "Fire, Electrocution, Heavy Molds, Fork Lift accidents." } },
                { dept: { ar: "ูุณู ุงูุชุฌููุน", en: "Assembly Dept." }, risk: { ar: "ุญุฑููุ ุตุนู ููุฑุจุงุฆูุ ุญูุงุฏุซ ุฑุงูุนุงุช ุดูููุฉ.", en: "Fire, Electrocution, Fork Lift accidents." } },
                { dept: { ar: "ูุณู ุงูุดุญู ุงูุฑุทุจ ูุงููุญุต", en: "Wet Charging & PDI Dept." }, risk: { ar: "ุญุฑููุ ุตุนู ููุฑุจุงุฆูุ ููุงุฏ ููููุงุฆูุฉ (ุญูุถ).", en: "Fire, Electrocution, Chemical (Acid)." } },
                { dept: { ar: "ุงููุณุชูุฏุนุงุช", en: "Warehouses" }, risk: { ar: "ุญุฑููุ ุตุนู ููุฑุจุงุฆูุ ููุงุฏ ููููุงุฆูุฉุ ุญูุงุฏุซ ุฑุงูุนุงุช ุดูููุฉ.", en: "Fire, Electrocution, Chemical, Fork Lift accidents." } }
            ],
            s2_title: { ar: "ุงููููู ุงูุชูุธููู ูุงููุฑู", en: "Organizational Structure & Teams" },
            s2_p: { ar: "ุชุนุฑู ุนูู ุงููููู ุงูุชูุธููู ูุฅุฏุงุฑุฉ ุงูุทูุงุฑุฆ ูุงูููุงุฆู ุงููุงููุฉ ูุฃุนุถุงุก ุงููุฑู ุงููุฎุชููุฉ ูุถูุงู ุงูุชูุงุตู ุงููุนุงู ุฃุซูุงุก ุงูุทูุงุฑุฆ.", en: "Learn about the emergency management structure and the full lists of various team members to ensure effective communication during emergencies." },
            s2_org_title: { ar: "ุงููููู ุงูุชูุธููู ูุฅุฏุงุฑุฉ ุงูุทูุงุฑุฆ", en: "Emergency Management Structure" },
            s2_org_l1: { ar: "ุงููุดุฑู ุงูุนุงู (ุงูุฑุฆูุณ ุงูุชูููุฐู)", en: "Overall Supervisor (CEO)" },
            s2_org_l2: { ar: "ูุณุคูู ุงูุฃูู ูุงูุณูุงูุฉ", en: "Security & Safety Officer" },
            teams_structure: [
                { icon: '๐จโ๐', name: { ar: "ูุฑูู ุงูุฅุทูุงุก", en: "Firefighting Team" } },
                { icon: '๐ถโโ๏ธ', name: { ar: "ูุฑูู ุงูุฅุฎูุงุก", en: "Evacuation Team" } },
                { icon: '๐งโโ๏ธ', name: { ar: "ูุฑูู ุงูุฅุณุนุงู", en: "First Aid Team" } },
                { icon: '๐ง', name: { ar: "ูุฑูู ุงูุตูุงูุฉ", en: "Maintenance Team" } }
            ],
            s2_lists_title: { ar: "ููุงุฆู ุฃุนุถุงุก ุงููุฑู", en: "Team Member Lists" },
            teams: [
                { name: {ar: "ูุฑูู ุงูุฃูู ูุงูุณูุงูุฉ", en: "Security & Safety Team"}, members: [
                    { name: "Brijendra Swarup", role: { ar: "ุฑุฆูุณ (ุงูุณูุงูุฉ ูุงูุจูุฆุฉ ูุงูุชุฏุฑูุจ)", en: "Head (HSE & Training)" }, phone: "99232776" },
                    { name: "Khalfan Rashid Al Habsi", role: { ar: "ููู (ุงูุตุญุฉ ูุงูุณูุงูุฉ ูุงูุจูุฆุฉ)", en: "HSE - Technician" }, phone: "91115835" }
                ]},
                { name: {ar: "ูุฑูู ุงูุฅุทูุงุก ูุงูุฅุฎูุงุก", en: "Fire Warden & Evacuation Team"}, members: ["Nasser Mubarak Hamed Al Baluchi", "Abdul Sattar Darwish Hassan Al Baluchi", "Ahmed Abdullah Nasser Al Mawali", "Brijendra Swarup", "Khalfan Rashid Khalfan Obaid Al Habsi", "Mohd Salim Said Al Omairi", "Kumaresh Yuvaraj", "Muthalagan Kannan", "Balbeer Singh Mehta", "Vijayan Karumandiyil", "Ali Mabrook Ahmed Al Baluchi", "Moonnonnil Eappen Jexon", "Saleh Abdullah Harib Al Khamisi", "Nasser Salim Rashid Al Shiyadi"] },
                { name: {ar: "ูุฑูู ุงูุฅุณุนุงูุงุช ุงูุฃูููุฉ", en: "First Aid Team"}, members: ["Ibrahim Issa Ibrahim Al Baluchi", "Dilip Kumar Samanta", "Chandra Sekaran Paranji", "Brijendra Swarup", "Khalfan Rashid Khalfan Obaid Al Habsi", "Talal Ali Ahmed Al Saadi", "Darwish Nasser Salim Al Owaisi", "Sojan Joseph", "Noodana Murugan Radhakrishana", "Vijayan Karumandiyil", "Ali Mabrook Ahmed Al Baluchi", "Moonnonnil Eappen Jexon", "Sanjay Kumar Yadav", "Nasser Salim Rashid Al Shiyadi"] },
                { name: {ar: "ูุฑูู ุงูุตูุงูุฉ", en: "Maintenance Team"}, members: [{name:"Satyashil Salve", phone:"96733140"}, {name:"Rakesh Deshmukh", phone:"92290296"}, {name:"Santosh Kumar", phone:"94210123"}] }
            ],
            s3_title: { ar: "ุงููุงุฌุจุงุช ูุงููุณุคูููุงุช ุงูุชูุตูููุฉ", en: "Detailed Duties & Responsibilities" },
            s3_p: { ar: "ุชูุตูู ุฏููู ูููุณุคูููุงุช ุงูููููุฉ ููู ุฏูุฑ ูู ุงูููุดุฃุฉุ ูู ุงูุฅุฏุงุฑุฉ ุงูุนููุง ุฅูู ุงูููุธูููุ ูุถูุงู ุงุณุชุฌุงุจุฉ ููุธูุฉ ููุนุงูุฉ.", en: "A detailed breakdown of the responsibilities assigned to each role in the facility, from senior management to employees, to ensure an organized and effective response." },
            roles: [
                { role: {ar: "ุฌููุน ุงูููุธููู", en: "All Employees"}, duties: { ar: ["ุฅุทูุงู ุงูุฅูุฐุงุฑ ุนูุฏ ุงูุชุดุงู ุญุฑูู.", "ููุงูุญุฉ ุงูุญุฑูู ุงูุฃููู ุฅุฐุง ูุงู ุขูููุง.", "ุฅููุงู ุงูุขูุงุช ูุงูุชูุฌู ูููุทุฉ ุงูุชุฌูุน ุจุฃูุงู."], en: ["Activate the alarm upon discovering a fire.", "Fight the initial fire only if it is safe.", "Stop machinery and proceed safely to the assembly point."] } },
                { role: {ar: "ูุฑูู ุงูุฅุทูุงุก", en: "Fire Team"}, duties: { ar: ["ุงุฑุชุฏุงุก ุงูุณุชุฑุฉ ุงููุฎุตุตุฉ.", "ุงูุชูุฌู ุฅูู ููุญุฉ ุฅูุฐุงุฑ ุงูุญุฑูู ูุชููู ุงูุชุนูููุงุช.", "ุงูุงุณุชุฌุงุจุฉ ููููุน ุงูุญุฑูู ูุงูุชุนุงูู ูุนู ุฅุฐุง ูุงู ุขูููุง."], en: ["Wear the designated jacket.", "Report to the fire alarm panel for instructions.", "Respond to the fire scene and deal with it if safe."] } },
                { role: {ar: "ูุฑูู ุงูุฅุณุนุงูุงุช ุงูุฃูููุฉ", en: "First Aid Team"}, duties: { ar: ["ุฃุฎุฐ ุญููุจุฉ ุงูุฅุณุนุงูุงุช ุงูุฃูููุฉ ูุงูููุงูุฉ ุฅูู ูููุน ุงูุญุงุฏุซ.", "ุชูููุฑ ุงูุฅุณุนุงูุงุช ุงูุฃูููุฉ ูุชูููู ุงูุฅุตุงุจุงุช.", "ุงููุณุงุนุฏุฉ ูู ุงุชุฎุงุฐ ูุฑุงุฑ ููู ุงููุตุงุจ ูููุณุชุดูู."], en: ["Take the first aid kit and stretcher to the scene.", "Provide first aid and assess injuries.", "Assist in the decision to move the injured for medical help."] } }
            ],
            s4_title: { ar: "ุขููุฉ ุชูุนูู ุงูุฎุทุฉ ูุฅุฌุฑุงุกุงุช ุงูุทูุงุฑุฆ", en: "Plan Activation & Emergency Procedures" },
            s4_p: { ar: "ุชุณูุณู ุงูุฅุฌุฑุงุกุงุช ุงููุชุจุนุฉ ุนูุฏ ูููุน ุญุงูุฉ ุทุงุฑุฆุฉุ ุจุฏุกุงู ูู ูุญุธุฉ ุงูุงูุชุดุงู ูุญุชู ุชุณููู ุงููููุน ููุฌูุงุช ุงููุฎุชุตุฉุ ุจุงูุฅุถุงูุฉ ุฅูู ุงูุฅุฌุฑุงุกุงุช ุงูุชูุตูููุฉ ููู ููุน ูู ุงูุทูุงุฑุฆ.", en: "The sequence of actions to be taken when an emergency occurs, from the moment of discovery to handing over the site to the competent authorities, in addition to detailed procedures for each type of emergency." },
            s4_phase1_title: { ar: "ุงููุฑุญูุฉ ุงูุฃููู: ูุจู ูุตูู ูุฑู ุงูุฏูุงุน ุงููุฏูู", en: "Phase 1: Before Civil Defence Arrival" },
            phase1_steps: [
                { title: { ar: "ุงูุชูุนูู ูุงูุงุณุชุฌุงุจุฉ", en: "Activation & Response" }, p: { ar: "ุชูุดูุท ุบุฑูุฉ ุงูุชุญููุ ุชุญุฏูุฏ ูููุน ุงูุญุงุฏุซุ ูุฅุฑุณุงู ุงููุฑู ุงูุฏุงุฎููุฉ.", en: "Activate control room, identify incident location, dispatch internal teams." } },
                { title: { ar: "ุงูุงุชุตุงู ูุงูุฅุฎูุงุก", en: "Contact & Evacuation" }, p: { ar: "ุงูุงุชุตุงู ุจุฑูู ุงูุทูุงุฑุฆ (9999) ูุงูุจุฏุก ูู ุฅุฎูุงุก ุงูุฃูุฑุงุฏ ูููุงุท ุงูุชุฌูุน.", en: "Call emergency number (9999) and begin evacuating personnel to assembly points." } }
            ],
            s4_phase2_title: { ar: "ุงููุฑุญูุฉ ุงูุซุงููุฉ: ุจุนุฏ ูุตูู ูุฑู ุงูุฏูุงุน ุงููุฏูู", en: "Phase 2: After Civil Defence Arrival" },
            phase2_steps: [
                { title: { ar: "ุชูุฏูู ุงูุฅูุฌุงุฒ", en: "Briefing" }, p: { ar: "ุชูุฏูู ููุฌุฒ ูุงูู ุนู ุงูุญุงุฏุซ (ููุนูุ ูููุนูุ ุญุฌููุ ุนุฏุฏ ุงููุตุงุจูู).", en: "Provide a full brief on the incident (type, location, scale, number of casualties)." } },
                { title: { ar: "ุชุณููู ุงูููุงุฏุฉ", en: "Handover of Command" }, p: { ar: "ุชุณููู ููุงุฏุฉ ุงููููุน ุงูููุฏุงููุฉ ููุฑู ุงูููุฆุฉ ูุชูุฏูู ุงูุฏุนู ุงููุงูู.", en: "Hand over field command to the authority's teams and provide full support." } }
            ],
            s4_procedures_title: { ar: "ุงูุฅุฌุฑุงุกุงุช ุงูุชูุตูููุฉ ุญุณุจ ููุน ุงูุทุงุฑุฆ", en: "Detailed Procedures by Emergency Type" },
            risk_tabs: [
                { id: 'fire-emergency', icon: '๐ฅ', text: { ar: "ุทูุงุฑุฆ ุงูุญุฑูู", en: "Fire Emergency" } },
                { id: 'medical-emergency', icon: '๐', text: { ar: "ุทูุงุฑุฆ ุทุจูุฉ", en: "Medical Emergency" } },
                { id: 'environmental-emergency', icon: '๐ฟ', text: { ar: "ุทูุงุฑุฆ ุจูุฆูุฉ", en: "Environmental Emergency" } }
            ],
            procedures_fire: [
                { title: {ar:'ุนูุฏ ุงูุชุดุงู ุญุฑูู', en:'On Discovery of a Fire'}, steps: {ar: ['ูู ุจุชุดุบูู ุงูุฅูุฐุงุฑ.', 'ูุงูุญ ุงูุญุฑูู ุฅุฐุง ูุงู ุขูููุง.', 'ุงุชุจุน ุชุนูููุงุช ูุฑุงูุจู ุงูุญุฑูู.'], en:['Turn on the alarm.', 'Fight the fire if safe to do so.', 'Follow instructions from Fire Wardens.']} },
                { title: {ar:'ุนูุฏ ุณูุงุน ุงูุฅูุฐุงุฑ', en:'On Hearing the Alarm'}, steps: {ar: ['ุฃููููุง ุงูุขูุงุช ูุชูุฌููุง ูููุทุฉ ุงูุชุฌูุน.', 'ูุคูู ููุธูู ุงูููุงุชุจ ุฃุนูุงููู ููุชูุฌููู ูููุทุฉ ุงูุชุฌูุน.'], en:['Stop machines and walk safely towards the assembly point.', 'Office staff are to secure their work and walk safely to the assembly point.']} }
            ],
            procedures_medical: [
                { title: {ar:'ูุณุชููุงุช ุงูุงุณุชุฌุงุจุฉ', en:'Levels of Response'}, steps: {ar: ['ุงููุณุชูู 1 (ููุงุฉ): ุฅุจูุงุบ ุงูุดุฑุทุฉ ูุงูุฅุฏุงุฑุฉ.', 'ุงููุณุชูู 2 (ุฅุตุงุจุฉ ุฎุทูุฑุฉ): ุฅุจูุงุบ ูุฏูุฑ ุงูุงุณุชุฌุงุจุฉ ูุงูุดุฑุทุฉ.', 'ุงููุณุชูู 3 (ุฅุณุนุงู ุฃููู): ูุชู ูู ุงููููุน.'], en:['Level 1 (Fatality): Inform Police and senior management.', 'Level 2 (Serious Injury): Inform Duty Response Manager and Police.', 'Level 3 (First Aid): Must be done at the work site.']} },
                { title: {ar:'ูุงุฌุจุงุช ูุฑูู ุงูุฅุณุนุงูุงุช ุงูุฃูููุฉ', en:'First Aid Team Duties'}, steps: {ar: ['ุชููู ุทูุจ ุงููุณุงุนุฏุฉ.', 'ุฃุฎุฐ ุญููุจุฉ ุงูุฅุณุนุงูุงุช ุงูุฃูููุฉ ูููููุน.', 'ุชูููู ุงูุฅุตุงุจุงุช ูุชูุฏูู ุงููุดูุฑุฉ.'], en:['Receive a request for assistance.', 'Take the First Aid kit to the scene.', 'Assess the injuries and advise on further action.']} }
            ],
            procedures_environmental: [
                { title: {ar:'ุชุณุฑุจ ุบุงุฒ', en:'Gas Leakage'}, steps: {ar: ['ุชุญุฐูุฑ ุงูุขุฎุฑูู.', 'ุฅุจูุงุบ ูุณุคูู ุงูููุงูุจุฉ.', 'ุนุฒู ุงูุชุณุฑุจ ูุฅุบูุงู ุงูุตูุงู ุฅู ุฃููู.'], en:['Warn the others.', 'Inform the nearest Shift-in-charge.', 'Isolate the leakage and turn off the valve if possible.']} },
                { title: {ar:'ุงูุณูุงุจ ููุงุฏ ููููุงุฆูุฉ', en:'Chemicals Substances Leakage'}, steps: {ar: ['ุทูุจ ุงููุณุงุนุฏุฉ ุงูููุฑูุฉ.', 'ุบุณู ุงูููุทูุฉ ุงููุตุงุจุฉ ุจุงููุงุก ุงููุธูู.', 'ุงุณุชุฎุฏุงู ุนุฏุฉ ุงุญุชูุงุก ุงูุงูุณูุงุจ (Spill Kit).'], en:['Ask for immediate assistance.', 'Wash with fresh water on the affected area.', 'Use spill kit (if required).']} }
            ],
            s5_title: { ar: "ุงูุฃูุธูุฉ ูุงููุนุฏุงุช", en: "Systems & Equipment" },
            s5_p: { ar: "ุชูุงุตูู ุญูู ุฃูุธูุฉ ุงูุณูุงูุฉ ููุนุฏุงุช ุงูุทูุงุฑุฆ ุงููุชููุฑุฉ ูู ุงูููุดุฃุฉุ ุจูุง ูู ุฐูู ุฃููุงุนูุงุ ุฃุนุฏุงุฏูุงุ ูุฌุฏุงูู ุงููุญุต ุงูุฏูุฑู ูุถูุงู ุฌุงูุฒูุชูุง ุงูุฏุงุฆูุฉ.", en: "Details about the safety systems and emergency equipment available in the facility, including their types, quantities, and periodic inspection schedules to ensure their constant readiness." },
            s5_extinguisher_title: { ar: "ุชูุงุตูู ูุนุฏุงุช ุฅุทูุงุก ุงูุญุฑูู", en: "Fire Fighting Equipment Details" },
            s5_extinguisher_chart_title: { ar: "ุชูุฒูุน ุทูุงูุงุช ุงูุญุฑูู ุงููุฏููุฉ", en: "Distribution of Manual Fire Extinguishers" },
            extinguisher_types: [
                { name: { ar: "ุทูุงูุฉ ุงูุฑุบูุฉ (Foam)", en: "Foam Extinguisher" }, use: { ar: "ุชุณุชุฎุฏู ูุญุฑุงุฆู ุงูุณูุงุฆู ุงููุงุจูุฉ ููุงุดุชุนุงู ูุซู ุงูุฒููุช ูุงูุดุญูู.", en: "Used for flammable liquid fires like oils and grease." } },
                { name: { ar: "ุทูุงูุฉ ุซุงูู ุฃูุณูุฏ ุงููุฑุจูู (CO2)", en: "CO2 Extinguisher" }, use: { ar: "ุชุณุชุฎุฏู ูุญุฑุงุฆู ุงููุนุฏุงุช ูุงูุฃุฌูุฒุฉ ุงูููุฑุจุงุฆูุฉ.", en: "Used for electrical equipment and device fires." } },
                { name: { ar: "ุทูุงูุฉ ุงูุจูุฏุฑุฉ ุงูุฌุงูุฉ (Dry Powder)", en: "Dry Powder Extinguisher" }, use: { ar: "ูุชุนุฏุฏุฉ ุงูุงุณุชุฎุฏุงูุงุชุ ุชุตูุญ ููุฎุชูู ุฃููุงุน ุงูุญุฑุงุฆู.", en: "Multi-purpose, suitable for various types of fires." } },
                { name: { ar: "ุทูุงูุฉ ุงููุงุก (Water)", en: "Water Extinguisher" }, use: { ar: "ุชุณุชุฎุฏู ูุญุฑุงุฆู ุงูููุงุฏ ุงูุตูุจุฉ ูุซู ุงูุฃุฎุดุงุจ ูุงููุฑู.", en: "Used for solid material fires like wood and paper." } }
            ],
            s5_inspection_title: { ar: "ุฌุฏูู ุงููุญุต ุงูุฏูุฑู ูููุนุฏุงุช", en: "Periodic Equipment Inspection Schedule" },
            inspection_headers: { ar: ["ุงููุนุฏุฉ / ุงููุธุงู", "ุชูุฑุงุฑ ุงููุญุต", "ุงูุฌูุฉ ุงููุณุคููุฉ"], en: ["Equipment / System", "Frequency", "Responsible Body"] },
            inspection_rows: [
                { cells: { ar: ["ูุธุงู ุฅูุฐุงุฑ ุงูุญุฑูู", "ูู 3 ุฃุดูุฑ", "ุดุฑูุฉ ูุนุชูุฏุฉ"], en: ["Fire Alarm System", "Every 3 months", "Certified Company"] } },
                { cells: { ar: ["ุทูุงูุงุช ุงูุญุฑูู", "ุดูุฑูุงู (ุฏุงุฎูู)", "ููู ุงูุณูุงูุฉ"], en: ["Fire Extinguishers", "Monthly (Internal)", "Safety Technician"] } },
                { cells: { ar: ["ูุตุงุจูุญ ุงูุทูุงุฑุฆ", "ุดูุฑูุงู", "ูุฑูู ุงูุตูุงูุฉ"], en: ["Emergency Lights", "Monthly", "Maintenance Team"] } }
            ],
            s5_alarm_title: { ar: "ูุนูููุงุช ูุธุงู ุฅูุฐุงุฑ ุงูุญุฑูู", en: "Fire Alarm System Information" },
            alarm_system_info: [
                { ar: "<strong>ุบุฑูุฉ ุงูุชุญูู (ุงูุนูููุงุช):</strong> ุชูุน ุนูุฏ ุงููุฏุฎู ุงูุฑุฆูุณู ูุชุนูู ุนูู ูุฏุงุฑ 24 ุณุงุนุฉ.", en: "<strong>Control Room (Operations):</strong> Located at the main entrance, operates 24/7." },
                { ar: "<strong>ูุญุชููุงุช ุงูุบุฑูุฉ:</strong> ููุญุฉ ุชุญูู ุฑุฆูุณูุฉุ ุดุงุดุงุช ูุฑุงูุจุฉุ ูุธุงู ุงุชุตุงู.", en: "<strong>Room Contents:</strong> Main alarm control panel, monitoring screens, communication system." },
                { ar: "<strong>ููุญุฉ ุงูุชูุฑุงุฑ ุงููุณุงุนุฏุฉ:</strong> ููุชุจ ุงูุตูุงูุฉ.", en: "<strong>Auxiliary Repeater Panel:</strong> Maintenance office." }
            ],
            s6_title: { ar: "ุทุฑู ุงูุฅุฎูุงุก ูุงููุฎุทุทุงุช", en: "Evacuation Routes & Layouts" },
            s6_p: { ar: "ุชุญุชูู ูุฐู ุงูุตูุญุฉ ุนูู ุงูุชุนูููุงุช ุงูุฃุณุงุณูุฉ ูุนูููุฉ ุงูุฅุฎูุงุกุ ูุงุฌุจุงุช ุงูุฃูุฑุงุฏุ ูููุงูุน ููุงุท ุงูุชุฌูุน ุงูุขููุฉ ูุงููุฎุทุทุงุช ุงูุชูุถูุญูุฉ ููููุดุฃุฉ.", en: "This page contains the basic instructions for the evacuation process, individual duties, locations of safe assembly points, and illustrative layouts of the facility." },
            s6_instructions_title: { ar: "ุชุนูููุงุช ุงูุฅุฎูุงุก ูุฌููุน ุงูููุธููู ๐", en: "Evacuation Instructions for All Employees ๐" },
            evacuation_instructions: [
                { ar: "<strong>ุงูุชุญูู ุจุงููุฏูุก</strong> ูุนุฏู ุงูุงุฑุชุจุงู ุฃู ุงูุฎูู.", en: "<strong>Remain calm</strong> and do not panic or become confused." },
                { ar: "<strong>ุฅููุงู ุงูุนูู ููุฑูุง</strong> ูุงูุชูุฌู ุฅูู ููุงุท ุงูุชุฌูุน.", en: "<strong>Stop work immediately</strong> and proceed to the assembly points." },
                { ar: "<strong>ุนุฏู ุงุณุชุฎุฏุงู ุงููุตุงุนุฏ ุงูููุฑุจุงุฆูุฉ ููุงุฆููุง</strong> ูุงุณุชุฎุฏุงู ุงูุณูุงูู ููุท.", en: "<strong>Never use elevators</strong>; use stairs only." }
            ],
            s6_assembly_points_title: { ar: "ููุงุท ุงูุชุฌูุน ุงูุขููุฉ ๐", en: "Safe Assembly Points ๐" },
            assembly_points: [
                { title: { ar: "ููุทุฉ ุงูุชุฌูุน ุฑูู 1", en: "Assembly Point 1" }, location: { ar: "ุงููููุน: ุฃูุงู ุงูุจูุงุจุฉ ุงูุฑุฆูุณูุฉ (ุฏุงุฎู ููุฑ ุงููุตูุน).", en: "Location: In front of the main gate (inside the factory premises)." } },
                { title: { ar: "ููุทุฉ ุงูุชุฌูุน ุฑูู 2", en: "Assembly Point 2" }, location: { ar: "ุงููููุน: ุจูู ุงููุณุชูุฏุนุงุช ููุณู ุงูุดุญู ุงูุฑุทุจ.", en: "Location: Between the warehouses and the wet charging section." } }
            ],
            s6_layouts_title: { ar: "ูุฎุทุทุงุช ุงูููุดุฃุฉ", en: "Facility Layouts" },
            s6_layouts_p: { ar: "ูุฌุจ ุฅุฑูุงู ุงููุฎุทุทุงุช ุจุญุฌู A3 ุญุณุจ ูุชุทูุจุงุช ุงูุฏูุงุน ุงููุฏูู.", en: "Layouts must be attached in A3 size as per Civil Defense requirements." },
            layout_tabs: [
                { id: 'plant-layout', text: { ar: 'ุงููุฎุทุท ุงูุนุงู', en: 'Plant Layout' }, src: 'https://www2.0zz0.com/2025/09/10/04/599475278.jpg' },
                { id: 'ground-floor', text: { ar: 'ุงูุทุงุจู ุงูุฃุฑุถู', en: 'Ground Floor' }, src: 'https://www2.0zz0.com/2025/09/10/04/983802278.jpg' },
                { id: 'first-floor', text: { ar: 'ุงูุทุงุจู ุงูุฃูู', en: 'First Floor' }, src: 'https://www2.0zz0.com/2025/09/10/04/725512056.jpg' },
                { id: 'plate-making', text: { ar: 'ุตูุงุนุฉ ุงูุฃููุงุญ', en: 'Plate Making' }, src: 'https://www2.0zz0.com/2025/09/10/04/929650601.jpg' },
                { id: 'plate-formation', text: { ar: 'ุชุดููู ุงูุฃููุงุญ', en: 'Plate Formation' }, src: 'https://www2.0zz0.com/2025/09/10/04/994618355.jpg' },
                { id: 'injection-moulding', text: { ar: 'ุงููููุจุฉ ุจุงูุญูู', en: 'Injection Moulding' }, src: 'https://www2.0zz0.com/2025/09/10/04/727482632.jpg' },
                { id: 'battery-manufacturing', text: { ar: 'ุชุตููุน ุงูุจุทุงุฑูุงุช', en: 'Battery Manufacturing' }, src: 'https://www2.0zz0.com/2025/09/10/04/623778171.jpg' },
                { id: 'battery-charging', text: { ar: 'ุดุญู ุงูุจุทุงุฑูุงุช', en: 'Battery Charging' }, src: 'https://www2.0zz0.com/2025/09/10/04/124029851.jpg' },
                { id: 'warehouse', text: { ar: 'ุงููุณุชูุฏุน', en: 'Warehouse' }, src: 'https://www2.0zz0.com/2025/09/10/04/148262206.jpg' },
            ],
            s7_title: { ar: "ุฃุฑูุงู ููุงุชู ุงูุทูุงุฑุฆ", en: "Emergency Contact Numbers" },
            s7_p: { ar: "ูุงุฆูุฉ ูุญุฏุซุฉ ุจุฃูู ุฃุฑูุงู ุงูุงุชุตุงู ุงูุฏุงุฎููุฉ ูุงูุฎุงุฑุฌูุฉ ูุงุณุชุฎุฏุงููุง ูู ุญุงูุงุช ุงูุทูุงุฑุฆ.", en: "An updated list of the most important internal and external contact numbers for use in emergencies." },
            s7_external_title: { ar: "ุงูุฌูุงุช ุงูุฎุงุฑุฌูุฉ", en: "External Agencies" },
            s7_internal_title: { ar: "ุงููุนูููู ุจุงูููุดุฃุฉ", en: "Internal Contacts" },
            s8_title: { ar: "ุงูุณูุงุณุงุช ูุงูุฅุฌุฑุงุกุงุช ุงูุฅุฏุงุฑูุฉ", en: "Administrative Policies & Procedures" },
            s8_p: { ar: "ููุฎุต ููุณูุงุณุงุช ูุงูุฅุฌุฑุงุกุงุช ุงูุฅุฏุงุฑูุฉ ุงูุฑุฆูุณูุฉ ุงููุชุนููุฉ ุจุงูุตุญุฉ ูุงูุณูุงูุฉ ุงูููููุฉ ูู ุงูุดุฑูุฉ.", en: "A summary of the main administrative policies and procedures related to occupational health and safety in the company." },
            s8_policy_title: { ar: "๐ ุณูุงุณุฉ ุงูุณูุงูุฉ ูุงูุตุญุฉ ุงูููููุฉ", en: "๐ OHS Policy" },
            safety_policy: [
                { ar: "ุงูุงูุชุฒุงู ุจูุงูุฉ ุงููุฑุงุณูู ุงูุณูุทุงููุฉ ูุงูููุงููู ุงููุฒุงุฑูุฉ.", en: "Compliance with all Royal Decrees and ministerial laws." },
                { ar: "ุชูุชุฒู ุงูุฅุฏุงุฑุฉ ุจุฃู ูุงูุฉ ุงูุญูุงุฏุซ ูููู ููุน ูููุนูุง.", en: "Management is committed that all accidents are preventable." },
                { ar: "ุชูููุฑ ุงูุชุฏุฑูุจ ุงููุงุฒู ููููุธููู ููููููุง ุนูู ุฏุฑุงูุฉ ุจุงููุฎุงุทุฑ.", en: "Provide necessary training for employees to be aware of risks." }
            ],
            s8_investigation_title: { ar: "๐ต๏ธ ุฅุฌุฑุงุกุงุช ุงูุชุญููู ูู ุงูุญูุงุฏุซ", en: "๐ต๏ธ Accident Investigation Procedures" },
            investigation_steps: [
                { ar: "ุฅุฌุฑุงุก ุชุญููู ููุฑู ูู ูุจู ุงููุณุคูู ุงููุจุงุดุฑ.", en: "Immediate investigation by the direct supervisor." },
                { ar: "ุชุนุจุฆุฉ ุชูุฑูุฑ ุฃููู ููุญุงุฏุซ ูุฑูุนู ุฎูุงู 24 ุณุงุนุฉ.", en: "Complete and submit an initial incident report within 24 hours." },
                { ar: "ุฑูุน ุชูุฑูุฑ ููุงุฆู ููุตู ุฎูุงู 3 ุฃูุงู ููุถุญ ุงูุฅุฌุฑุงุกุงุช ุงูููุงุฆูุฉ.", en: "Submit a final detailed report within 3 days outlining preventive measures." }
            ],
            equipment_chart_labels: { ar: ['ุฑุบูุฉ', 'ุซุงูู ุฃูุณูุฏ ุงููุฑุจูู', 'ุจูุฏุฑุฉ ุฌุงูุฉ', 'ูุงุก'], en: ['Foam', 'CO2', 'Dry Powder', 'Water'] },
            equipment_data: [97, 90, 31, 3],
            contacts_external: [
                    { entity: {ar: "ุงูุทูุงุฑุฆ", en: "Emergency"}, number: "9999", type: "emergency" },
                    { entity: {ar: "ุงูุฏูุงุน ุงููุฏูู (ุงูุฑุณูู)", en: "Civil Defence (Rusayl)"}, number: "24446726", type: "normal" },
                    { entity: {ar: "ุฃูุฑุจ ูุณุชุดูู (ุงูุฑุณูู)", en: "Nearest Hospital (Rusayl)"}, number: "24446151", type: "normal" }
            ],
            contacts_internal: [
                { role: {ar: "ุงูุฑุฆูุณ ุงูุชูููุฐู ุจุงูุฅูุงุจุฉ", en: "Acting CEO"}, number: "90993326" },
                { role: {ar: "ูุงุฆุจ ุงููุฏูุฑ ุงูุนุงู (ุงูุฃุนูุงู)", en: "Deputy General Manager (Works)"}, number: "99422380" },
                { role: {ar: "ุฑุฆูุณ (ุงูุณูุงูุฉ ูุงูุจูุฆุฉ ูุงูุชุฏุฑูุจ)", en: "Head (HSE & Training)"}, number: "99232776" },
                { role: {ar: "ุฑุฆูุณ (ุงูุตูุงูุฉ)", en: "Head (Maintenance)"}, number: "99315053" },
                { role: {ar: "ูุฏูุฑ ุฃูู (ุงูุฅุฏุงุฑุฉ ูุงูููุงุฑุฏ ุงูุจุดุฑูุฉ)", en: "Sr. Manager (Admin & HR)"}, number: "94190915" },
                { role: {ar: "ูุฏูุฑ (ุงูุตูุงูุฉ)", en: "Manager (Maintenance)"}, number: "96733140" },
                { role: {ar: "ููู (ุงูุตุญุฉ ูุงูุณูุงูุฉ ูุงูุจูุฆุฉ)", en: "HSE - Technician"}, number: "91115835" }
            ]
        };
        
        function updateUI() {
            const lang = currentLanguage;
            const dir = lang === 'ar' ? 'rtl' : 'ltr';
            document.documentElement.lang = lang;
            document.documentElement.dir = dir;

            document.getElementById('lang-toggle-text').innerText = translations.toggle_lang_btn[lang];
            document.getElementById('lang-toggle-icon').innerText = lang === 'ar' ? '๐ฌ๐ง' : '๐ด๐ฒ';

            document.querySelectorAll('[data-translate]').forEach(el => {
                const key = el.dataset.translate;
                if (translations[key] && translations[key][lang]) {
                    el.innerHTML = translations[key][lang];
                }
            });

            const navContainer = document.getElementById('main-nav');
            const currentActiveId = navContainer.querySelector('.active-nav')?.href.split('#')[1] || 'dashboard';
            navContainer.innerHTML = '';
            translations.nav_items.forEach((item, index) => {
                const navLink = document.createElement('a');
                navLink.href = `#${item.id}`;
                navLink.className = `nav-item flex items-center p-3 rounded-lg`;
                if(item.id === currentActiveId) {
                    navLink.classList.add('active-nav');
                }
                navLink.onclick = (e) => {
                    e.preventDefault();
                    showSection(item.id, navLink);
                };
                navLink.innerHTML = `<span class="text-lg">${item.icon}</span><span class="mx-3 font-semibold">${item.text[lang]}</span>`;
                navContainer.appendChild(navLink);
            });
            
            document.getElementById('objectives-grid').innerHTML = translations.objectives.map(obj => `
                <div class="bg-stone-50 p-4 rounded-lg border">
                    <h4 class="font-bold text-slate-700">${obj.icon} ${obj.title[lang]}</h4>
                    <p class="text-sm text-stone-600 mt-1">${obj.p[lang]}</p>
                </div>`).join('');
            
            document.getElementById('risks-grid').innerHTML = translations.risks.map(r => `
                <div class="border border-stone-200 p-4 rounded-lg">
                    <h4 class="font-bold text-slate-700">${r.dept[lang]}</h4>
                    <p class="text-sm text-stone-600"><strong>${lang === 'ar' ? 'ุงูุฃุฎุทุงุฑ:' : 'Risks:'}</strong> ${r.risk[lang]}</p>
                </div>`).join('');

            document.getElementById('teams-structure-grid').innerHTML = translations.teams_structure.map(t => `
                <div class="bg-gray-200 p-3 rounded-lg shadow">${t.icon}<br>${t.name[lang]}</div>
            `).join('');

            createAccordion('definitions-accordion-container', translations.definitions, true);
            populateTeamLists();
            createAccordion('roles-accordion-container', translations.roles);
            
            document.getElementById('phase1-steps').innerHTML = translations.phase1_steps.map((step, i) => `
                <li class="mb-10 ms-6"><span class="absolute flex items-center justify-center w-8 h-8 bg-blue-100 rounded-full -start-4 ring-4 ring-white">${i+1}</span><h4 class="font-bold text-slate-700">${step.title[lang]}</h4><p class="text-sm text-stone-600">${step.p[lang]}</p></li>
            `).join('');
            document.getElementById('phase2-steps').innerHTML = translations.phase2_steps.map((step, i) => `
                <li class="mb-10 ms-6"><span class="absolute flex items-center justify-center w-8 h-8 bg-green-100 rounded-full -start-4 ring-4 ring-white">${i+1}</span><h4 class="font-bold text-slate-700">${step.title[lang]}</h4><p class="text-sm text-stone-600">${step.p[lang]}</p></li>
            `).join('');

            const riskTabsContainer = document.getElementById('risk-tabs');
            const currentActiveTab = riskTabsContainer.querySelector('.active')?.id;
            riskTabsContainer.innerHTML = '';
            translations.risk_tabs.forEach((tab, index) => {
                 const button = document.createElement('button');
                 button.id = `${tab.id}-btn`;
                 button.onclick = (e) => switchTab('activation', tab.id, e.currentTarget);
                 button.className = `tab-button whitespace-nowrap py-4 px-1 border-b-2 font-medium text-stone-500 hover:text-stone-700 hover:border-stone-300`;
                 button.innerHTML = `${tab.icon} ${tab.text[lang]}`;
                 riskTabsContainer.appendChild(button);
            });

            const activeTabButton = currentActiveTab ? riskTabsContainer.querySelector(`#${currentActiveTab.replace('-emergency', '-emergency-btn')}`) : riskTabsContainer.children[0];
            if(activeTabButton){
                activeTabButton.classList.add('active', 'text-amber-600', 'border-amber-500');
                activeTabButton.classList.remove('text-stone-500', 'hover:text-stone-700', 'hover:border-stone-300');
            } else if (riskTabsContainer.children.length > 0) {
                 riskTabsContainer.children[0].classList.add('active', 'text-amber-600', 'border-amber-500');
                 riskTabsContainer.children[0].classList.remove('text-stone-500', 'hover:text-stone-700', 'hover:border-stone-300');
            }


            createAccordion('fire-procedures', translations.procedures_fire);
            createAccordion('medical-procedures', translations.procedures_medical);
            createAccordion('environmental-procedures', translations.procedures_environmental);
            
            document.getElementById('extinguisher-types').innerHTML = translations.extinguisher_types.map(t => `
                <div class="bg-stone-50 p-3 rounded-lg border"><h5 class="font-bold">${t.name[lang]}</h5><p class="text-sm text-stone-600">${t.use[lang]}</p></div>
            `).join('');
            
            populateInspectionTable();
            document.getElementById('alarm-system-info').innerHTML = translations.alarm_system_info.map(info => `<li>${info[lang]}</li>`).join('');
            
            document.getElementById('evacuation-instructions').innerHTML = translations.evacuation_instructions.map(inst => `<li>${inst[lang]}</li>`).join('');
            document.getElementById('assembly-points').innerHTML = translations.assembly_points.map(p => `
                <div class="border-2 border-green-500 bg-green-50 p-4 rounded-lg"><h4 class="font-bold text-green-800">${p.title[lang]}</h4><p class="text-green-700">${p.location[lang]}</p></div>
            `).join('');

            populateLayoutTabs();
            
            document.getElementById('safety-policy-list').innerHTML = translations.safety_policy.map(p => `<li>${p[lang]}</li>`).join('');
            document.getElementById('investigation-steps').innerHTML = translations.investigation_steps.map(s => `<li>${s[lang]}</li>`).join('');
            
            populateContacts();

            setupFireExtinguisherChart();

            document.querySelectorAll('.border-r-4, .border-l-4').forEach(el => {
                el.classList.toggle('border-r-4', dir === 'rtl');
                el.classList.toggle('border-l-4', dir === 'ltr');
                 el.classList.toggle('border-l-0', dir === 'rtl');
                el.classList.toggle('border-r-0', dir === 'ltr');
            });
             document.querySelectorAll('.border-r-2, .border-l-2').forEach(el => {
                el.classList.toggle('border-r-2', dir === 'rtl');
                el.classList.toggle('border-l-2', dir === 'ltr');
                el.classList.toggle('ms-4', dir === 'rtl');
                el.classList.toggle('me-4', dir === 'ltr');
            });
        }

        function toggleLanguage() {
            currentLanguage = currentLanguage === 'ar' ? 'en' : 'ar';
            updateUI();
        }

        function setupFireExtinguisherChart() {
            if (fireExtinguisherChart) {
                fireExtinguisherChart.destroy();
            }
            const ctx = document.getElementById('fireExtinguisherChart').getContext('2d');
            fireExtinguisherChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: translations.equipment_chart_labels[currentLanguage],
                    datasets: [{
                        label: currentLanguage === 'ar' ? 'ุงูุนุฏุฏ' : 'Count',
                        data: translations.equipment_data,
                        backgroundColor: ['#38bdf8', '#f87171', '#facc15', '#a78bfa'],
                        borderColor: '#ffffff',
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true, maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'top', labels: { font: { family: currentLanguage === 'ar' ? 'Tajawal' : 'Readex Pro', size: 14 } } },
                        tooltip: { bodyFont: { family: currentLanguage === 'ar' ? 'Tajawal' : 'Readex Pro' }, titleFont: { family: currentLanguage === 'ar' ? 'Tajawal' : 'Readex Pro' } }
                    }
                }
            });
        }

        function populateTeamLists() {
            const container = document.getElementById('team-lists-container');
            container.innerHTML = '';
            translations.teams.forEach(team => {
                let membersHtml = team.members.map(member => {
                    if (typeof member === 'object' && member.role) { // Security & Safety Team
                        return `<li class="flex justify-between items-center"><div>${member.name}<br><span class="text-xs text-stone-500">${member.role[currentLanguage]}</span></div><span class="text-sm font-semibold text-slate-600">${member.phone}</span></li>`;
                    } else if (typeof member === 'object' && !member.role) { // Maintenance Team
                        return `<li class="flex justify-between items-center"><span>${member.name}</span> <span class="text-sm font-semibold text-slate-600">${member.phone}</span></li>`;
                    }
                    return `<li>${member}</li>`; // Simple name list
                }).join('');
                
                const card = document.createElement('div');
                card.className = "bg-stone-50 p-4 rounded-lg border border-stone-200";
                card.innerHTML = `<h4 class="font-bold text-slate-700 mb-2">${team.name[currentLanguage]}</h4><ul class="text-sm text-stone-600 space-y-2 h-48 overflow-y-auto ps-4">${membersHtml}</ul>`;
                container.appendChild(card);
            });
        }
        
        function createAccordion(containerId, data, isDefinition = false) {
            const container = document.getElementById(containerId);
            if (!container) return;
            container.innerHTML = '';
            data.forEach(item => {
                const element = document.createElement('div');
                element.className = 'border border-stone-200 rounded-lg overflow-hidden bg-white';
                let title = item.role?.[currentLanguage] || item.title?.[currentLanguage] || item.term?.[currentLanguage];
                let contentData = item.duties?.[currentLanguage] || item.steps?.[currentLanguage] || [item.definition?.[currentLanguage]];
                let contentList = Array.isArray(contentData) ? contentData : [contentData];
                
                element.innerHTML = `
                    <button class="w-full text-start p-4 bg-stone-50 hover:bg-stone-100 focus:outline-none flex justify-between items-center" onclick="toggleAccordionContent(this)">
                        <span class="font-bold text-slate-700">${title}</span>
                        <span class="transform transition-transform duration-300 text-stone-500">โผ</span>
                    </button>
                    <div class="accordion-content p-4 text-stone-700">
                         <ul class="${isDefinition ? '' : 'list-disc list-inside'} space-y-2">${contentList.map(c => `<li>${c}</li>`).join('')}</ul>
                    </div>
                `;
                container.appendChild(element);
            });
        }

        function toggleAccordionContent(button) {
            const content = button.nextElementSibling;
            const icon = button.querySelector('span:last-child');
            if (content.style.maxHeight && content.style.maxHeight !== '0px') {
                content.style.maxHeight = null;
                icon.style.transform = 'rotate(0deg)';
            } else {
                content.style.maxHeight = content.scrollHeight + "px";
                icon.style.transform = 'rotate(180deg)';
            }
        }
        
        function populateInspectionTable() {
            const headContainer = document.getElementById('inspection-table-head');
            const bodyContainer = document.getElementById('inspection-table-body');
            headContainer.innerHTML = translations.inspection_headers[currentLanguage].map(h => `<th class="px-6 py-3 text-start text-xs font-medium text-stone-500 uppercase tracking-wider">${h}</th>`).join('');
            bodyContainer.innerHTML = translations.inspection_rows.map(row => `<tr>${row.cells[currentLanguage].map(cell => `<td class="px-6 py-4 whitespace-nowrap text-sm text-stone-600">${cell}</td>`).join('')}</tr>`).join('');
        }

        function populateContacts() {
            const externalContainer = document.getElementById('external-contacts-container');
            const internalContainer = document.getElementById('internal-contacts-container');
            externalContainer.innerHTML = translations.contacts_external.map(c => `<div class="flex justify-between items-center ${c.type === 'emergency' ? 'bg-red-50' : 'bg-stone-100'} p-3 rounded-lg"><span class="font-bold ${c.type === 'emergency' ? 'text-red-800' : 'text-stone-700'}">${c.entity[currentLanguage]}</span><span class="text-lg font-bold ${c.type === 'emergency' ? 'text-red-800' : 'text-slate-800'} tracking-widest">${c.number}</span></div>`).join('');
            internalContainer.innerHTML = translations.contacts_internal.map(c => `<div class="flex justify-between items-center bg-stone-100 p-3 rounded-lg"><span class="text-stone-700">${c.role[currentLanguage]}</span><span class="font-semibold text-slate-800">${c.number}</span></div>`).join('');
        }
        
        function showSection(sectionId, element) {
            document.querySelectorAll('.content-section').forEach(section => section.classList.add('hidden'));
            const currentSection = document.getElementById(sectionId);
            if(currentSection) currentSection.classList.remove('hidden');
            
            document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active-nav'));
            element.classList.add('active-nav');
        }

        function switchTab(section, tabId, buttonElement) {
            const sectionElement = document.getElementById(section);
            if (!sectionElement) return;
            sectionElement.querySelectorAll('.tab-content').forEach(content => content.classList.add('hidden'));
            const tabContent = sectionElement.querySelector(`#${tabId}`);
            if(tabContent) tabContent.classList.remove('hidden');
            
            sectionElement.querySelectorAll('.tab-button').forEach(button => {
                button.classList.remove('active', 'text-amber-600', 'border-amber-500');
                button.classList.add('text-stone-500', 'hover:text-stone-700', 'hover:border-stone-300');
            });
            buttonElement.classList.add('active', 'text-amber-600', 'border-amber-500');
            buttonElement.classList.remove('text-stone-500', 'hover:text-stone-700', 'hover:border-stone-300');
        }

        function populateLayoutTabs() {
            const tabsContainer = document.getElementById('layout-tabs');
            const imageDisplay = document.getElementById('layout-image-display');
            tabsContainer.innerHTML = '';
            translations.layout_tabs.forEach((tab, index) => {
                const button = document.createElement('button');
                button.className = 'layout-tab whitespace-nowrap py-2 px-3 border-b-2 font-medium text-sm';
                if (index === 0) {
                    button.classList.add('active');
                    imageDisplay.src = tab.src;
                }
                button.innerText = tab.text[currentLanguage];
                button.onclick = () => {
                    imageDisplay.src = tab.src;
                    tabsContainer.querySelectorAll('.layout-tab').forEach(t => t.classList.remove('active'));
                    button.classList.add('active');
                };
                tabsContainer.appendChild(button);
            });
        }

        function openLightbox(src) {
            document.getElementById('lightbox-img').src = src;
            document.getElementById('lightbox').classList.remove('hidden');
        }
        function closeLightbox() {
            document.getElementById('lightbox').classList.add('hidden');
        }
        
        async function downloadPDF() {
            const { jsPDF } = window.jspdf;
            const downloadBtn = document.getElementById('download-pdf-btn');
            const originalBtnHTML = downloadBtn.innerHTML;
            downloadBtn.innerHTML = `<svg class="animate-spin h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> <span>${currentLanguage === 'ar' ? 'ุฌุงุฑู ุงูุฅูุดุงุก...' : 'Generating...'}</span>`;
            downloadBtn.disabled = true;

            const content = document.getElementById('main-content');
            const currentActiveSectionId = document.querySelector('.nav-item.active-nav')?.href.split('#')[1] || 'dashboard';
            const collapsedAccordions = Array.from(content.querySelectorAll('.accordion-content'));
            const originalScrollPos = content.scrollTop;
            
            // Prepare UI for capture
            content.scrollTop = 0;
            document.querySelectorAll('.content-section').forEach(s => s.classList.remove('hidden'));
            collapsedAccordions.forEach(a => {
                if (a.style.maxHeight === '0px' || !a.style.maxHeight) {
                    a.style.maxHeight = a.scrollHeight + 'px';
                }
            });
            
            await new Promise(resolve => setTimeout(resolve, 500)); 

            try {
                const canvas = await html2canvas(content, { scale: 2, useCORS: true, logging: false, windowWidth: content.scrollWidth, windowHeight: content.scrollHeight });
                const { jsPDF } = window.jspdf;
                const pdf = new jsPDF('p', 'mm', 'a4');
                const pdfWidth = pdf.internal.pageSize.getWidth();
                const pdfHeight = pdf.internal.pageSize.getHeight();
                
                const imgWidth = canvas.width;
                const imgHeight = canvas.height;
                const ratio = imgWidth / pdfWidth;
                const totalPDFPages = Math.ceil(imgHeight / (pdfHeight * ratio));

                for (let i = 0; i < totalPDFPages; i++) {
                    if (i > 0) pdf.addPage();
                    const y = -(pdfHeight * i * ratio);
                    pdf.addImage(canvas, 'PNG', 0, y, pdfWidth, imgHeight / ratio, undefined, 'FAST');
                }
                
                pdf.save('Reem_Batteries_Emergency_Plan.pdf');

            } catch (error) {
                console.error("Error generating PDF:", error);
            } finally {
                // Restore UI
                document.querySelectorAll('.content-section').forEach(s => s.classList.add('hidden'));
                document.getElementById(currentActiveSectionId)?.classList.remove('hidden');
                
                collapsedAccordions.forEach(a => a.style.maxHeight = null);
                content.scrollTop = originalScrollPos;
                
                downloadBtn.innerHTML = originalBtnHTML;
                downloadBtn.disabled = false;
                downloadBtn.querySelector('span').innerText = translations.download_pdf_btn[currentLanguage];
            }
        }


        document.addEventListener('DOMContentLoaded', () => {
            updateUI();
        });
    </script>
</body>
</html>

